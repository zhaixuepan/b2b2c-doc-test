# 其他认证服务测试用例

## 数据准备

一、开启测试模式

二、缓存图片验证码，内容如下

| key                          | value |
| ---------------------------- | ----- |
| CAPTCHA_52c260_REGISTER_1111 | 1111  |

三、发送短信

验证码：1111

四、会员数据准备

| member_id | uname             | password | mobile      |
| --------- | ----------------- | -------- | ----------- |
| 99999999  | haobeckhaobeckhao | 123123   | 18234124444 |

## 测试用例

一、验证手机验证码测试用例

1、参数为空校验

| scene    | sms_code | mobile      | message          |
| -------- | -------- | ----------- | ---------------- |
|          | 1111     | 18234124444 | 业务场景不能为空 |
| REGISTER |          | 18234124444 | 验证码不能为空   |

预期

> code：004

3、手机号码格式校验

| scene    | sms_code | mobile  | message          |
| -------- | -------- | ------- | ---------------- |
| REGISTER | 1111     | 1823412 | 短信验证码不正确 |

预期

> code：107
>
> message：短信验证码不正确

4、验证码错误校验

| scene    | sms_code | mobile      | message          |
| -------- | -------- | ----------- | ---------------- |
| REGISTER | 2222     | 18234124444 | 短信验证码不正确 |

预期

> code：107
>
> message：短信验证码不正确

5、正确校验

| scene    | sms_code | mobile      | message |
| -------- | -------- | ----------- | ------- |
| REGISTER | 1111     | 18234124444 |         |

预期

> http状态：200

二、验证用户名重复测试用例

1、用户名不存在校验

| username | message |
| -------- | ------- |
| 11111    |         |

预期

> http状态：200
>
> return ：{"exist":false}

2、用户名存在校验

| username          | message |
| ----------------- | ------- |
| haobeckhaobeckhao |         |

对于返回值，做了如下校验

​	1、"exist":true

​	2、suggests的两个自动生成的用户名进行是否注册会员校验

预期

> http状态：200
>
> return ：{"exist":true,"suggests":["name1","name2"]}

三、验证手机号重复测试用例

1、手机号码存在校验

| mobile      | message |
| ----------- | ------- |
| 18234124444 |         |

预期

> http状态：200
>
> return ：{"exist":true}

2、手机号码不存在校验

| mobile      | message |
| ----------- | ------- |
| 18234124442 |         |

预期

> http状态：200
>
> return ：{"exist":false}

3、手机号码格式错误校验

| mobile | message            |
| ------ | ------------------ |
| abc    | 手机号码格式不正确 |

预期

> code：107
>
> message ：手机号码格式不正确