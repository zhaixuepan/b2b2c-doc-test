# 会员安全测试用例

## 测试数据

1、开启测试模式

2、执行会员注册

3、执行会员登录

## 测试用例

一、发送手机验证验证码测试

1、参数为空校验

| uuid   | captcha | 预期状态 | 预期消息           |
| ------ | ------- | -------- | ------------------ |
|        | 111     | 004      | uuid不能为空       |
| 52c260 |         | 004      | 图片验证码不能为空 |

2、验证码错误校验
| uuid   | captcha | 预期状态 | 预期消息         |
| ------ | ------- | -------- | ---------------- |
| 52c260 | 111     | 107      | 图片验证码不正确 |

3、未绑定手机号码发送短信测试

使用未绑定手机会员token进行请求

| uuid   | captcha | 预期状态 | 预期消息             |
| ------ | ------- | -------- | -------------------- |
| 52c260 | 111     | 114      | 当前会员未绑定手机号 |

4、正确校验
| uuid   | captcha | 预期状态 | 预期消息             |
| ------ | ------- | -------- | -------------------- |
| 52c260 | 111     | 114      | 当前会员未绑定手机号 |

二、发送手机绑定验证码测试

1、参数为空校验
| uuid   | captcha | 预期状态 | 预期消息           |
| ------ | ------- | -------- | ------------------ |
|        | 111     | 004      | uuid不能为空       |
| 52c260 |         | 004      | 图片验证码不能为空 |

2、验证码错误校验

生成图片验证码

| uuid   | captcha | 预期状态 | 预期消息         |
| ------ | ------- | -------- | ---------------- |
| 52c260 | 2222    | 107      | 图片验证码不正确 |

3、已经绑定手机号码校验

> 生成图片验证码，使用已经绑定其他会员手机进行绑定

| uuid   | captcha | 预期状态 | 预期消息                   |
| ------ | ------- | -------- | -------------------------- |
| 52c260 | 1111    | 107      | 此手机号码已经绑定其他用户 |

4、手机格式校验

> 使用手机号码格式不正确的手机号进行请求

| uuid   | captcha | 预期状态 | 预期消息                   |
| ------ | ------- | -------- | -------------------------- |
| 52c260 | 1111    | 107      | 手机号码格式不正确 |

5、正确校验
| uuid   | captcha | 预期http状态 | 预期消息                   |
| ------ | ------- | -------- | -------------------------- |
| 52c260 | 1111    | 200      |  |
三、手机绑定api测试
1、参数为空校验
| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
|  | 004   | 短信验证码不能为空 |

2、短信验证码错误校验

> 发送手机验证码

| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 2222 | 004   | 短信验证码错误 |

3、未进行手机校验进行手机绑定

> 未进行手机号码校验直接进行绑定操作

| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 1111 | 115 | 对已绑定手机校验失效 |

4、手机号码格式校验
| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 1111 | 107 | 短信验证码错误 |

5、正确校验

> 1、给已经绑定的手机发送手机验证码

> 2、校验验证码是否正确

> 3、发送绑定手机验证码

> 4、执行换绑操作

| sms_code   | 预期http状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 1111 | 200 |  |

绑定成功后需要根据换绑的手机号码进行会员的获取，如果获取到则 换绑成功。

四、修改密码api测试

1、参数为空校验

| uuid | captcha | password | 预期状态 | 预期消息 |
| ---- | ------- | -------- | ---- |---- |
|      | 1111 | 111111  | 004 |uuid不能为空|
| 52c260 |          | 111111 | 004 |图片验证码不能为空|
| 52c260 | 1111 |   | 004 |密码长度为4-20个字符|

2、未经过手机验证修改密码

> 获取验证码

| uuid | captcha | password  | 预期状态 | 预期消息 |
| ---- | ------- | --------  | ---- |---- |
| 52c260 | 1111 | 111111 | 115 |对已绑定手机校验失效|

3、图片验证码错误校验

| uuid | captcha | password  | 预期状态 | 预期消息 |
| ---- | ------- | --------  | ---- |---- |
| 52c260 | 2222 | 111111  | 115 |图片验证码不正确|
4、两次密码不一致校验
| uuid | captcha | password | 预期状态 | 预期消息 |
| ---- | ------- | -------- | ---- |---- |
| 52c260 | 2222 | 222222 | 115 |两次密码不一致|
5、密码长度校验
| uuid | captcha | password  | 预期状态 | 预期消息 |
| ---- | ------- | --------  | ---- |---- |
| 52c260 | 2222 | 123 | 115 |密码长度为4-20个字符|
6、正确校验
> 1、发送手机校验验证码
> 2、验证手机校验码
> 3、获取图片验证码
> 4、执行修改密码

| uuid   | captcha | password  | 预期http状态 | 预期消息 |
| ------ | ------- | --------  | ------------ | -------- |
| 52c260 | 2222    | 111111              | 200          |          |

五、手机绑定测试

1、参数为空校验
| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
|  | 004   | 短信验证码不能为空 |

2、短信验证码错误校验

> 发送手机验证码

| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 2222 | 004   | 短信验证码错误 |

3、手机号码格式校验
| sms_code   | 预期状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 1111 | 107 | 短信验证码错误 |

4、正确校验

> 1、发送绑定手机验证码

> 2、执行绑定操作

| sms_code   | 预期http状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 1111 | 200 |  |

绑定成功后需要根据换绑的手机号码进行会员的获取，如果获取到则 换绑成功。

5、 校验此操作是否是换绑

> 1、正确绑定手机号码

> 2、再次调用绑定操作

| sms_code   | 预期http状态 | 预期消息                   |
| ------ | -------- | -------------------------- |
| 1111 | 111 | 当前会员已经绑定手机号 |